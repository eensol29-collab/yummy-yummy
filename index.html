<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WHO MADE THIS? YUMMY YUMMY</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    :root { --bg:#f8fafc; --fg:#0f172a; --card:#fff; --muted:#64748b; --border:#e2e8f0; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Pretendard", sans-serif; background:var(--bg); color:var(--fg); }
    .container { max-width: 1000px; margin: 0 auto; padding: 24px; }
    h1 { font-size: 28px; margin: 0 0 8px; text-align:center; }
    p.lead { color: var(--muted); margin: 0 0 24px; text-align:center; }
    .grid { display: grid; gap: 16px; }
    @media (min-width: 800px) { .grid.two { grid-template-columns: 1fr 1fr; } }
    .card { background:var(--card); border: 1px solid var(--border); border-radius: 16px; padding:16px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    .section-title { font-size: 18px; font-weight: 700; margin-bottom: 12px; text-align:center; }
    .item { display:flex; align-items:center; justify-content:space-between; border:1px solid var(--border); padding:12px; border-radius: 12px; }
    .desc { font-weight:600; white-space:pre-line; }
    .food { font-size:15px; margin-top:4px; color:#334155; }
    .qty { display:flex; align-items:center; }
    .qty input { width: 56px; text-align:center; border-top:1px solid var(--border); border-bottom:1px solid var(--border); padding:6px 0; }
    .btn { padding: 8px 14px; border-radius: 12px; border:1px solid var(--border); background:#fff; cursor:pointer; }
    .btn.primary { background:#0f172a; color:#fff; border-color:#0f172a; }
    .btn:disabled { opacity: .5; cursor: not-allowed; }
    .row { display:flex; gap:12px; align-items:center; }
    .row > * { flex:1; }
    label span { display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
    input[type="text"], input[type="number"], select { width:100%; padding:10px 12px; border:1px solid var(--border); border-radius: 12px; background:#fff; }
    .total { display:flex; align-items:center; justify-content:space-between; font-weight:700; font-size:18px; }
    .qrwrap { display:flex; flex-direction:column; align-items:center; gap:8px; }
    .qrtext { font-size: 12px; color: var(--muted); word-break: break-all; text-align:center; }
    .note { font-size: 11px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="container">
    <h1>WHO MADE THIS? YUMMY YUMMY</h1>
    <p class="lead">ë©”ë‰´ë¥¼ ì„ íƒí•˜ê³  ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ë©´ ì´ì•¡ê³¼ ê²°ì œìš© QRì´ ìƒì„±ë©ë‹ˆë‹¤. (Venmo / Zelle)</p>

    <div class="grid two">
      <section class="card">
        <div class="section-title">ğŸ° ë””ì €íŠ¸</div>
        <div id="list-bread" class="grid"></div>
      </section>

      <section class="card">
        <div class="section-title">ğŸµ ìŒë£Œ</div>
        <div id="list-drink" class="grid"></div>
      </section>
    </div>

    <section class="card" style="margin-top:16px;">
      <div class="total">
        <span>ì´ì•¡</span><span id="total">$0.00</span>
      </div>

      <div class="grid two" style="margin-top:12px;">
        <label>
          <span>ê²°ì œ ìˆ˜ë‹¨</span>
          <select id="method">
            <option value="Venmo">Venmo</option>
            <option value="Zelle">Zelle</option>
          </select>
        </label>

        <label id="venmo-field">
          <span>Venmo ì•„ì´ë”” (@ ì œì™¸)</span>
          <input type="text" id="venmo" value="hjolee1" placeholder="hjolee1"/>
        </label>

        <label id="zelle-field" style="display:none;">
          <span>Zelle ì „í™”ë²ˆí˜¸/ì´ë©”ì¼</span>
          <input type="text" id="zelle" value="2242891619" placeholder="2242891619"/>
        </label>

        <label>
          <span>ë©”ëª¨</span>
          <input type="text" id="note" value="Fundraiser" placeholder="Fundraiser"/>
        </label>
      </div>

      <div class="row" style="margin-top:12px;">
        <button id="makeqr" class="btn primary">QR ìƒì„±</button>
        <a id="venmolink" class="btn" href="#" target="_blank" rel="noreferrer" style="display:none;">Venmo ë§í¬ ì—´ê¸°</a>
      </div>

      <div class="qrwrap" style="margin-top:12px; display:none;" id="qrwrap">
        <div id="qrcode"></div>
        <div class="qrtext" id="qrtext"></div>
        <p class="note" id="zellnote" style="display:none;">Zelleì€ ê³µì‹ ì›¹ ê²°ì œ ë§í¬ê°€ ì—†ì–´ ì†¡ê¸ˆ ì •ë³´ê°€ QRì— í…ìŠ¤íŠ¸ë¡œ ë“¤ì–´ê°‘ë‹ˆë‹¤. ìŠ¤ìº” í›„ ì•±ì—ì„œ ìˆ˜ì·¨ì¸/ê¸ˆì•¡/ë©”ëª¨ë¥¼ í™•ì¸í•´ ì „ì†¡í•˜ì„¸ìš”.</p>
      </div>
    </section>
  </div>

  <script>
    const ITEMS = [
      { desc: "ì—¬ê¸°ê°€ ë°”ë¡œ í¬ë¥´íˆ¬ê°ˆ!", name: "ì—ê·¸íƒ€ë¥´íŠ¸ (1ê°œ)", price: 5, category: "bread" },
      { desc: "ì—¬ê¸°ê°€ ë°”ë¡œ í¬ë¥´íˆ¬ê°ˆ!", name: "ì—ê·¸íƒ€ë¥´íŠ¸ (2ê°œ)", price: 9, category: "bread" },
      { desc: "ì§€ê¸ˆê¹Œì§€ ì´ëŸ° ì«€ë“ì€ ì—†ì—ˆë‹¤", name: "ì«€ë“ì¿ í‚¤", price: 6, category: "bread" },
      { desc: "Levainë³´ë‹¤ ë§›ìˆì„ê»„?", name: "ìŠ¤ì½˜", price: 6, category: "bread" },
      { desc: "ì´ˆë³´ì˜ ì†ëì—ì„œ ë‚˜ì˜¨ ëª…ì‘", name: "í‹°ë¼ë¯¸ìˆ˜", price: 9, category: "bread" },
      { desc: "ë‹¨ë§›ì€ ì¤„ì´ê³  í–¥ì€ ëŠ˜ë ¸ë‹¤", name: "ìœ ìì—ì´ë“œ", price: 4.5, category: "drink" },
      { desc: "ë¹„íƒ€ë¯¼ì´ ì•„ë‹ˆë¼ íë§ì´ì•¼", name: "ìëª½ì—ì´ë“œ", price: 5.5, category: "drink" },
      { desc: "ì—„ë§ˆê°€ íƒ€ì¤€ ê·¸ ë§›", name: "ë¯¸ìˆ«ê°€ë£¨", price: 5.5, category: "drink" },
      { desc: "", name: "ì´ê±´ ê·¸ëƒ¥ ì»¤í”¼", price: 3, category: "drink" }
    ];

    const listBread = document.getElementById('list-bread');
    const listDrink = document.getElementById('list-drink');
    const totalEl = document.getElementById('total');
    const methodEl = document.getElementById('method');
    const venmoField = document.getElementById('venmo-field');
    const zelleField = document.getElementById('zelle-field');
    const venmoEl = document.getElementById('venmo');
    const zelleEl = document.getElementById('zelle');
    const noteEl = document.getElementById('note');
    const makeqrBtn = document.getElementById('makeqr');
    const venmoLink = document.getElementById('venmolink');
    const qrwrap = document.getElementById('qrwrap');
    const qrcodeBox = document.getElementById('qrcode');
    const qrtext = document.getElementById('qrtext');
    const zellnote = document.getElementById('zellnote');

    function money(n){ return `$${(n||0).toFixed(2)}`; }
    function clamp(n, min=0, max=9999){ return Math.min(max, Math.max(min,n)); }

    function renderList() {
      listBread.innerHTML = "";
      listDrink.innerHTML = "";
      ITEMS.forEach(it => {
        const div = document.createElement('div');
        div.className = 'item';

        const left = document.createElement('div');
        const desc = document.createElement('div');
        desc.className = 'desc';
        desc.textContent = it.desc;
        const name = document.createElement('div');
        name.className = 'food';
        name.textContent = `${it.name} â€” ${money(it.price)}`;
        left.appendChild(desc);
        left.appendChild(name);

        const right = document.createElement('div');
        right.className = 'qty';
        const minus = document.createElement('button');
        minus.className = 'btn';
        minus.textContent = 'âˆ’';
        minus.onclick = () => { it.qty = clamp((it.qty||0) - 1, 0); update(); };
        const input = document.createElement('input');
        input.type = 'number';
        input.value = it.qty || 0;
        input.onchange = (e) => { it.qty = clamp(Number(e.target.value)||0,0); update(); };
        const plus = document.createElement('button');
        plus.className = 'btn';
        plus.textContent = '+';
        plus.onclick = () => { it.qty = clamp((it.qty||0) + 1,0); update(); };
        right.appendChild(minus);
        right.appendChild(input);
        right.appendChild(plus);

        div.appendChild(left);
        div.appendChild(right);

        if (it.category === 'bread') listBread.appendChild(div);
        else listDrink.appendChild(div);
      });
    }

    function calcTotal(){
      return ITEMS.reduce((s, it) => s + it.price * (it.qty || 0), 0);
    }

    function venmoUrl(amount, note, handle){
      const h = (handle||'').replace(/^@+/, '').trim();
      if(!h) return null;
      const amt = amount.toFixed(2);
      const memo = encodeURIComponent(note||'Fundraiser');
      return `https://venmo.com/${h}?txn=pay&amount=${amt}&note=${memo}`;
    }

    let qr;
    function makeQR(content){
      qrcodeBox.innerHTML = "";
      qr = new QRCode(qrcodeBox, {
        text: content || "",
        width: 220,
        height: 220,
        correctLevel: QRCode.CorrectLevel.M
      });
    }

    function update(){
      renderList();
      const t = calcTotal();
      totalEl.textContent = money(t);
      venmoLink.style.display = 'none';
      qrwrap.style.display = 'none';
      qrtext.textContent = '';
      zellnote.style.display = 'none';
    }

    methodEl.addEventListener('change', () => {
      if (methodEl.value === 'Venmo') {
        venmoField.style.display = '';
        zelleField.style.display = 'none';
      } else {
        venmoField.style.display = 'none';
        zelleField.style.display = '';
      }
      qrwrap.style.display = 'none';
      venmoLink.style.display = 'none';
    });

    makeqrBtn.addEventListener('click', () => {
      const t = calcTotal();
      const note = noteEl.value || 'Fundraiser';
      const method = methodEl.value;
      let content = "";
      venmoLink.style.display = 'none';
      zellnote.style.display = 'none';

      if (method === 'Venmo') {
        const url = venmoUrl(t, note, venmoEl.value);
        if (!url) { alert('Venmo ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); return; }
        content = url;
        venmoLink.href = url;
        venmoLink.style.display = '';
        qrtext.textContent = url;
      } else {
        const to = zelleEl.value.trim();
        if (!to) { alert('Zelle ì „í™”ë²ˆí˜¸/ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.'); return; }
        content = `Zelle Payment\nTo: ${to}\nAmount: $${t.toFixed(2)}\nNote: ${note}`;
        qrtext.innerHTML = `Zelle: ${to}<br>Amount: ${money(t)}<br>Note: ${note}`;
        zellnote.style.display = '';
      }

      makeQR(content);
      qrwrap.style.display = '';
    });

    renderList();
    update();
  </script>
</body>
</html>
